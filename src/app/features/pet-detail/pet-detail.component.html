<div class="min-h-screen bg-transparent py-12 px-4 sm:px-6 lg:px-8" *ngIf="pet as pet">
  <div class="max-w-6xl mx-auto bg-nature-cream rounded-2xl overflow-hidden flex flex-col lg:flex-row border border-nature-brown/20 shadow-sm">
    <div class="lg:w-1/2 bg-gray-100">
      <img [src]="pet.imageUrl" [alt]="pet.name" class="w-full h-full object-cover">
    </div>

    <div class="lg:w-1/2 p-8 lg:p-12 flex flex-col gap-6">
      <div>
        <p class="text-sm uppercase tracking-widest text-nature-brown font-semibold">Ficha de adopci√≥n</p>
          <h1 class="text-4xl font-extrabold text-nature-green mt-2">{{ pet.name }}</h1>
        <p class="text-lg text-gray-700">{{ pet.breed }} ‚Ä¢ {{ pet.age }} a√±os</p>
      </div>

      <p class="text-gray-700 leading-relaxed text-lg">{{ pet.description }}</p>

      <div class="flex items-center gap-3">
        <span
          class="px-3 py-1 text-sm font-semibold rounded-full"
          [ngClass]="pet.isAdopted ? 'bg-red-100 text-red-700 border border-red-200' : 'bg-green-100 text-nature-green border border-nature-green/30'"
        >
          {{ pet.isAdopted ? 'Adoptado' : 'Disponible' }}
        </span>
      </div>

      <div class="mt-auto flex gap-4">
        <a routerLink="/" class="text-nature-brown font-semibold hover:underline">‚Üê Volver</a>
        <button
          type="button"
          (click)="contactOwner()"
          class="flex-1 bg-nature-green hover:bg-[#4a572e] text-nature-light text-lg font-semibold py-3 px-6 rounded-xl shadow-sm transition duration-200"
        >
          {{ auth.isLoggedIn ? 'Solicitar Adopci√≥n' : 'üîí Inicia sesi√≥n para adoptar' }}
        </button>
      </div>

      @if (showForm) {
        <div class="mt-6 p-6 bg-nature-light border border-nature-brown/20 rounded-xl shadow-sm">
          <h3 class="text-xl font-semibold text-nature-green mb-4">Contacto directo</h3>
          <form [formGroup]="contactForm" class="space-y-4" (ngSubmit)="onSubmit()">
            <div>
              <label class="block text-sm font-medium text-nature-brown mb-1">Nombre completo</label>
              <input
                type="text"
                formControlName="fullName"
                class="w-full rounded-lg border border-nature-brown/50 px-4 py-2.5 shadow-sm focus:outline-none focus:ring-2 focus:ring-nature-green focus:border-nature-green"
                placeholder="Tu nombre"
              />
              @if (contactForm.controls.fullName.touched && contactForm.controls.fullName.invalid) {
                <p class="mt-1 text-sm text-red-600">Este campo es obligatorio.</p>
              }
            </div>

            <div>
              <label class="block text-sm font-medium text-nature-brown mb-1">Tel√©fono</label>
              <input
                type="tel"
                formControlName="phone"
                class="w-full rounded-lg border border-nature-brown/50 px-4 py-2.5 shadow-sm focus:outline-none focus:ring-2 focus:ring-nature-green focus:border-nature-green"
                placeholder="Ej: 5551234567"
              />
              @if (contactForm.controls.phone.touched && contactForm.controls.phone.invalid) {
                <p class="mt-1 text-sm text-red-600">Este campo es obligatorio.</p>
              }
            </div>

            <div>
              <label class="block text-sm font-medium text-nature-brown mb-1">Mensaje (opcional)</label>
              <textarea
                rows="3"
                formControlName="message"
                class="w-full rounded-lg border border-nature-brown/50 px-4 py-2.5 shadow-sm focus:outline-none focus:ring-2 focus:ring-nature-green focus:border-nature-green"
                placeholder="Cu√©ntanos por qu√© quieres adoptar"
              ></textarea>
            </div>

            <button
              type="submit"
              class="w-full bg-nature-green hover:bg-[#4a572e] text-nature-light font-semibold py-3 rounded-lg shadow-sm transition"
            >
              Enviar y abrir WhatsApp
            </button>
            @if (submitted) {
              <p class="text-sm text-green-600">¬°Solicitud enviada! Se abrir√° WhatsApp para contactar al due√±o.</p>
            }
          </form>
        </div>
      }
    </div>
  </div>
</div>
